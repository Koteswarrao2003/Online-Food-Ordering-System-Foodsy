<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0", user-scalable=no">
    <title>Foodsy</title>
    <link rel="icon" href="Foodsybox2.png">
    <link rel="stylesheet" href="address.css">
</head>
<body>
    <nav>
        <section class="navbar">
            <div class="navleft">
                <p class="domain">Foodsy</p>
                <p class="lines">&#9776;</p>
            </div>

            <div class="navright">
                <a href="index.html">
                    <p class="navcontact">Home</p>
                </a>
                <a href="menu.html">
                    <p class="navcontact">Menu</p>
                </a>
                <a href="contact.html">
                    <p class="navcontact">Contact</p>
                </a>
                <a href="about.html">
                    <p class="navcontact">About</p>
                </a>
                <a href="carts.html" class="carting">
                    <i class="fa-solid fa-cart-shopping cartlogo"></i>
                    <p class="navcontact">Cart</p>
                </a>
            </div>

        </section>
    </nav>

    <div class="deliverydetails">

            <h2>Enter Delivery Details</h2>
        
        <div class="insertimage">
            <img src="Delivery image.png" alt="Delivery Image" class="delivery">
        </div>
        
        <form id="orderForm" class="firstform">
            <div class="details">
                <input type="text" id="name" placeholder="Full Name" required class="in">
                <input type="text" id="phone" placeholder="Phone Number" required class="in">
                <textarea id="address" placeholder="Delivery Address" rows="4" required class="in"></textarea>
                <div class="buttons">
                    <button type="button" class="home" onclick="window.location.href='index.html'">Home</button>
                    <button type="submit" class="button">Proceed to Pay</button>
                </div>
            </div>
        </form>
    </div>

    <footer>
        <p class="foot">Â© 2025 <span class="high">Foodsy</span>. All rights reserved.</p>
    </footer>

<script>
let cart = JSON.parse(localStorage.getItem("checkoutCart")) || [];

document.getElementById("orderForm").addEventListener("submit", function(e){
    e.preventDefault();

    if(cart.length === 0){
        alert("Your cart is empty!");
        window.location.href = "carts.html";
        return;
    }

    let name = document.getElementById("name").value;
    let phone = document.getElementById("phone").value;
    let address = document.getElementById("address").value;

    // Prepare order summary (only name, first item name, and price)
    let firstItem = cart[0]; // or loop if you want multiple items
    let orderData = {
        userName: name,
        itemName: firstItem.name,
        itemPrice: firstItem.unitPrice
    };

    // Store in localStorage for payment.html
    localStorage.setItem("orderData", JSON.stringify(orderData));

    // Redirect to payment page
    window.location.href = "payment.html";
});
</script>

</body>
</html>